#!/usr/bin/env bash

set -euo pipefail

lint-secret() {
  export NODE_PATH="${2}/node_modules"

    for fn in $(git ls-files); do
      if test -e "${2}/.secretlintrc.json" ; then
        $NODE_PATH/.bin/secretlint --secretlintrc="${2}/.secretlintrc.json" "$fn"
      fi
    done

  exit 0
}

lint-secret "$1" "$2"
